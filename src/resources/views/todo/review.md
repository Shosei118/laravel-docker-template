# Laravel Lesson レビュー①

## Todo一覧機能
１. /todo にアクセス
２. ControllerでTodo::all() → 全ToDoを取得
３. index.blade.phpでループ表示（@foreach）
４. 作成ボタンで新規ToDoページへ遷移

### Todoモデルのallメソッドで実行しているSQLは何か
Eloquentが自動でテーブルの全レコードを取得するSQLを生成
　■ Eloquent：Laravelに組み込まれているORM（Object-Relational Mapping）のこと
　  ※ LaravelのORMはEloquentと呼ばれる
　　　　→ ORM：Classとテーブルを紐付け、SQL文を意識することなくテーブル操作が可能になるためのもの

### Todoモデルのallメソッドの返り値は何か
allメソッドを実行することで紐づくテーブルのレコード情報を全件取得できる

### 配列の代わりにCollectionクラスを使用するメリットは
CollectionインスタンスはLaravelで用意されているクラスで配列操作に特化している
  → データ操作をチェーンで簡潔に書ける
    ■ チェーンメソッド：複数のメソッドを連続して呼び出すこと
　　　　・処理を一行にまとめられる
　　　　・「オブジェクトを返すメソッド」を同じ行で続けて呼べる

### view関数の第1・第2引数の指定と何をしているか
view関数を使用することでControllerからbladeファイルへ値を渡す
　　第一引数：画面に表示したいbladeファイル
　　第二引数：渡したいデータを連想配列の形で渡す

### index.blade.phpの$todos・$todoに代入されているものは何か
$todos：todosテーブルにある全てのレコード
$todo ：todosテーブルのレコード1つずつ



## Todo作成機能
１. /todo/createを開く → フォーム表示
２. 入力して作成 → POST/todo に送信
３. コントローラのstoreが呼ばれる
４. バリデーションOK → todosテーブルに保存
５. 一覧ページへリダイレクト

### Requestクラスのallメソッドは何をしているか
リクエストで送信されたすべての入力データを取得する

### fillメソッドは何をしているか
Todoインスタンスの各プロパティに一括で代入する
　　$todo->{連想配列のkey} = {連想配列のvalue}を配列の全ての要素に対して行ってくれる

### $fillableは何のために設定しているか
fillableを定義して代入できる項目に制限をかけ、意図しないカラムを更新されないようにする

### saveメソッドで実行しているSQLは何か
オブジェクトの状態をDBに保存するINSERT文を実行

### redirect()->route()は何をしているか
redirect()->route('ルート名')でリダイレクトさせることができる



## その他

### テーブル構成をマイグレーションファイルで管理するメリット
・SQLを知らなくても、PHPコードでテーブル操作ができる
・マイグレーションファイルをGitで共有することで、開発者全員が同じテーブルを作成することができる

マイグレーションファイル：データベースの設計図をコードで管理するファイル
　　■ Migration (マイグレーション) : テーブルの作成
　　■ Seeder (シーダー) : レコードの作成

### マイグレーションファイルのup()、down()は何のコマンドを実行した時に呼び出されるのか
■ up()   ：テーブルの作成やカラム追加など追加する処理
■ down() ：up()で行った変更を元に戻す処理（ロールバック）
　　※ down()にはtodosテーブルを削除する実装がされている

### Seederクラスの役割は何か
データベースにサンプルデータを自動で登録する
　　■ SQLを直接書かずPHPコードで表現できるため可読性が高い
　　■ シーダーファイルをgit管理することで、テストデータを開発者間で共有できる

### route関数の引数・返り値・使用するメリット
route('ルート名')を使用することでそのルートに対応するURLを生成する
　■ 返り値：文字列、指定したルート名に対応するURLが返る
　■ メリット
　　　・URLを直接書かなくてもよい
     ・見やすい

ヘルパ関数：よく使う処理を短い関数で簡単に呼び出せる仕組み
　・可読性の向上 → 処理内容を簡単に理解できる
　・保守性の向上 → ルートやファイルパスが変わっても関数で管理できる

### @extends・@section・@yieldの関係性とbladeを分割するメリット
■ @extends：他のBladeファイル（レイアウト）を継承する
■ @section：レイアウトの特定の部分に内容を埋め込む
■ @yield  ：レイアウト側で子ビューの内容を差し込む場所を定義する

  ・@extends('Bladeファイルのパス')を使用することで他のBladeファイルを継承することができる
  ・@section('任意の文字列') ~ @endsectionで囲った部分を継承したBladeファイルの@yield('任意の文字列')の箇所に挿入される
  ・引数に同じ文字列を指定することで、@section()と@yield()を紐づけて、複数のBladeを組み合わせて1枚のHTMLを生成することが可能になる

### @csrfは何のための記述か
CSRF（クロスサイトリクエストフォージェリ）対策でフォームを安全に送信するためにトークンを埋め込む
※ これを付けないと、LaravelではPOST・PUT・DELETEなどのリクエストが403エラーになる

### {{ }}とは何の省略系か
PHPの「echo」の省略形
 ・変数や式の値をHTMLに出力する
 ・自動でHTMLエスケープされる為、XSS攻撃を防ぐ